{"ast":null,"code":"import _slicedToArray from\"C:/Users/julio/OneDrive/\\xC1rea de Trabalho/projetos/curso react/matheus batisti/LegendsRoblox/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./Photo.css\";import{uploads}from\"../../utils/config\";// components\nimport Message from\"../../components/Message\";import{Link}from\"react-router-dom\";import PhotoItem from\"../../components/PhotoItem\";// hooks\nimport{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useParams}from\"react-router-dom\";import{useResetComponentMessage}from\"../../hooks/useResetComponentMessage\";// Redux\nimport{comment,getPhoto,like}from\"../../slices/photoSlice\";import LikeContainer from\"../../components/LikeContainer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Photo=function Photo(){var _useParams=useParams(),id=_useParams.id;var dispatch=useDispatch();var resetMessage=useResetComponentMessage(dispatch);var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.photo;}),photo=_useSelector2.photo,loading=_useSelector2.loading,error=_useSelector2.error,message=_useSelector2.message;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),commentText=_useState2[0],setCommentText=_useState2[1];// Load photo data\nuseEffect(function(){dispatch(getPhoto(id));},[dispatch,id]);// Insert like\nvar handleLike=function handleLike(){dispatch(like(photo._id));resetMessage();};// Insert comment\nvar handleComment=function handleComment(e){e.preventDefault();var commentData={comment:commentText,id:photo._id};dispatch(comment(commentData));setCommentText(\"\");resetMessage();};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"A carregar\"});}return/*#__PURE__*/_jsxs(\"div\",{id:\"photo\",children:[/*#__PURE__*/_jsx(PhotoItem,{photo:photo}),/*#__PURE__*/_jsx(LikeContainer,{photo:photo,user:user,handleLike:handleLike}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-container\",children:[error&&/*#__PURE__*/_jsx(Message,{msg:error,type:\"error\"}),message&&/*#__PURE__*/_jsx(Message,{msg:message,type:\"success\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments\",children:photo.comments&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Comentarios: (\",photo.comments.length,\") \"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleComment,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Deixe seu coment\\xE1rio\",onChange:function onChange(e){return setCommentText(e.target.value);},value:commentText||\"\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Enviar\"})]}),photo.comments.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"N\\xE3o h\\xE1 coment\\xE1rios.\"}),photo.comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"author\",children:[comment.userImage&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(uploads,\"/users/\").concat(comment.userImage),alt:comment.userName}),/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(comment.userId),children:/*#__PURE__*/_jsx(\"p\",{children:comment.userName})})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.comment})]},comment.comment);})]})})]});};export default Photo;","map":{"version":3,"names":["uploads","Message","Link","PhotoItem","useEffect","useState","useSelector","useDispatch","useParams","useResetComponentMessage","comment","getPhoto","like","LikeContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Photo","_useParams","id","dispatch","resetMessage","_useSelector","state","auth","user","_useSelector2","photo","loading","error","message","_useState","_useState2","_slicedToArray","commentText","setCommentText","handleLike","_id","handleComment","e","preventDefault","commentData","children","className","msg","type","comments","length","onSubmit","placeholder","onChange","target","value","map","userImage","src","concat","alt","userName","to","userId"],"sources":["C:/Users/julio/OneDrive/Área de Trabalho/projetos/curso react/matheus batisti/LegendsRoblox/frontend/src/pages/Photo/Photo.js"],"sourcesContent":["import \"./Photo.css\";\r\n\r\nimport { uploads } from \"../../utils/config\";\r\n\r\n// components\r\nimport Message from \"../../components/Message\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PhotoItem from \"../../components/PhotoItem\";\r\n\r\n// hooks\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useResetComponentMessage } from \"../../hooks/useResetComponentMessage\";\r\n\r\n// Redux\r\nimport { comment, getPhoto, like } from \"../../slices/photoSlice\";\r\nimport LikeContainer from \"../../components/LikeContainer\";\r\n\r\nconst Photo = () => {\r\n\tconst { id } = useParams();\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst resetMessage = useResetComponentMessage(dispatch);\r\n\r\n\tconst { user } = useSelector((state) => state.auth);\r\n\tconst { photo, loading, error, message } = useSelector(\r\n\t\t(state) => state.photo\r\n\t);\r\n\r\n\tconst [commentText, setCommentText] = useState(\"\");\r\n\r\n\t// Load photo data\r\n\tuseEffect(() => {\r\n\t\tdispatch(getPhoto(id));\r\n\t}, [dispatch, id]);\r\n\t// Insert like\r\n\tconst handleLike = () => {\r\n\t\tdispatch(like(photo._id));\r\n\t\tresetMessage();\r\n\t};\r\n\t// Insert comment\r\n\tconst handleComment = (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst commentData = {\r\n\t\t\tcomment: commentText,\r\n\t\t\tid: photo._id,\r\n\t\t};\r\n\t\tdispatch(comment(commentData));\r\n\r\n\t\tsetCommentText(\"\");\r\n\r\n\t\tresetMessage();\r\n\t};\r\n\r\n\tif (loading) {\r\n\t\treturn <p>A carregar</p>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div id=\"photo\">\r\n\t\t\t<PhotoItem photo={photo} />\r\n\t\t\t<LikeContainer photo={photo} user={user} handleLike={handleLike} />\r\n\t\t\t<div className=\"message-container\">\r\n\t\t\t\t{error && <Message msg={error} type=\"error\" />}\r\n\t\t\t\t{message && <Message msg={message} type=\"success\" />}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"comments\">\r\n\t\t\t\t{photo.comments && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h3>Comentarios: ({photo.comments.length}) </h3>\r\n\t\t\t\t\t\t<form onSubmit={handleComment}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Deixe seu comentário\"\r\n\t\t\t\t\t\t\t\tonChange={(e) => setCommentText(e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={commentText || \"\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<input type=\"submit\" value=\"Enviar\" />\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t{photo.comments.length === 0 && <p>Não há comentários.</p>}\r\n\t\t\t\t\t\t{photo.comments.map((comment) => (\r\n\t\t\t\t\t\t\t<div className=\"comment\" key={comment.comment}>\r\n\t\t\t\t\t\t\t\t<div className=\"author\">\r\n\t\t\t\t\t\t\t\t\t{comment.userImage && (\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={`${uploads}/users/${comment.userImage}`}\r\n\t\t\t\t\t\t\t\t\t\t\talt={comment.userName}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${comment.userId}`}>\r\n\t\t\t\t\t\t\t\t\t\t<p>{comment.userName}</p>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<p>{comment.comment}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Photo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}