{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/julio/OneDrive/\\xC1rea de Trabalho/projetos/curso react/matheus batisti/LegendsRoblox/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/julio/OneDrive/\\xC1rea de Trabalho/projetos/curso react/matheus batisti/LegendsRoblox/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import userService from\"../services/userService\";var initialState={user:{},error:false,success:false,loading:false,message:null};// Get user details\nexport var profile=createAsyncThunk(\"user/profile\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,thunkAPI){var token,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=thunkAPI.getState().auth.user.token;_context.next=3;return userService.profile(user,token);case 3:data=_context.sent;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Update user details\nexport var updateProfile=createAsyncThunk(\"user/update\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user,thunkAPI){var token,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:token=thunkAPI.getState().auth.user.token;_context2.next=3;return userService.updateProfile(user,token);case 3:data=_context2.sent;if(!data.errors){_context2.next=6;break;}return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(data.errors[0]));case 6:console.log(data);return _context2.abrupt(\"return\",data);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// GEt user details\nexport var getUserDetails=createAsyncThunk(\"user/get\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,thunkAPI){var token,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:token=thunkAPI.getState().auth.user.token;_context3.next=3;return userService.getUserDetails(id,token);case 3:data=_context3.sent;return _context3.abrupt(\"return\",data);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var userSlice=createSlice({name:\"user\",initialState:initialState,reducers:{resetMessage:function resetMessage(state){state.message=null;}},extraReducers:function extraReducers(builder){builder.addCase(profile.pending,function(state){state.loading=true;state.error=false;}).addCase(profile.fulfilled,function(state,action){state.loading=false;state.success=true;state.error=null;state.user=action.payload;}).addCase(updateProfile.pending,function(state){state.loading=true;state.error=false;}).addCase(updateProfile.fulfilled,function(state,action){state.loading=false;state.success=true;state.error=null;state.user=action.payload;state.message=\"Utilizador actualizado com sucesso!\";}).addCase(updateProfile.rejected,function(state,action){console.log(state,action);state.loading=false;state.error=action.payload;state.user=null;}).addCase(getUserDetails.pending,function(state){state.loading=true;state.error=false;}).addCase(getUserDetails.fulfilled,function(state,action){state.loading=false;state.success=true;state.error=null;state.user=action.payload;});}});var resetMessage=userSlice.actions.resetMessage;export{resetMessage};export default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","userService","initialState","user","error","success","loading","message","profile","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","thunkAPI","token","data","wrap","_callee$","_context","prev","next","getState","auth","sent","abrupt","stop","_x","_x2","apply","arguments","updateProfile","_ref2","_callee2","_callee2$","_context2","errors","rejectWithValue","console","log","_x3","_x4","getUserDetails","_ref3","_callee3","id","_callee3$","_context3","_x5","_x6","userSlice","name","reducers","resetMessage","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/julio/OneDrive/Área de Trabalho/projetos/curso react/matheus batisti/LegendsRoblox/front/src/slices/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport userService from \"../services/userService\";\r\n\r\nconst initialState = {\r\n\tuser: {},\r\n\terror: false,\r\n\tsuccess: false,\r\n\tloading: false,\r\n\tmessage: null,\r\n};\r\n// Get user details\r\nexport const profile = createAsyncThunk(\r\n\t\"user/profile\",\r\n\tasync (user, thunkAPI) => {\r\n\t\tconst token = thunkAPI.getState().auth.user.token;\r\n\t\tconst data = await userService.profile(user, token);\r\n\r\n\t\treturn data;\r\n\t}\r\n);\r\n\r\n// Update user details\r\nexport const updateProfile = createAsyncThunk(\r\n\t\"user/update\",\r\n\tasync (user, thunkAPI) => {\r\n\t\tconst token = thunkAPI.getState().auth.user.token;\r\n\t\tconst data = await userService.updateProfile(user, token);\r\n\t\t// Check for erros\r\n\t\tif (data.errors) {\r\n\t\t\treturn thunkAPI.rejectWithValue(data.errors[0]);\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\r\n\t\treturn data;\r\n\t}\r\n);\r\n// GEt user details\r\nexport const getUserDetails = createAsyncThunk(\r\n\t\"user/get\",\r\n\tasync (id, thunkAPI) => {\r\n\t\tconst token = thunkAPI.getState().auth.user.token;\r\n\t\tconst data = await userService.getUserDetails(id, token);\r\n\r\n\t\treturn data;\r\n\t}\r\n);\r\n\r\nexport const userSlice = createSlice({\r\n\tname: \"user\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tresetMessage: (state) => {\r\n\t\t\tstate.message = null;\r\n\t\t},\r\n\t},\r\n\textraReducers: (builder) => {\r\n\t\tbuilder\r\n\t\t\t.addCase(profile.pending, (state) => {\r\n\t\t\t\tstate.loading = true;\r\n\t\t\t\tstate.error = false;\r\n\t\t\t})\r\n\t\t\t.addCase(profile.fulfilled, (state, action) => {\r\n\t\t\t\tstate.loading = false;\r\n\t\t\t\tstate.success = true;\r\n\t\t\t\tstate.error = null;\r\n\t\t\t\tstate.user = action.payload;\r\n\t\t\t})\r\n\t\t\t.addCase(updateProfile.pending, (state) => {\r\n\t\t\t\tstate.loading = true;\r\n\t\t\t\tstate.error = false;\r\n\t\t\t})\r\n\t\t\t.addCase(updateProfile.fulfilled, (state, action) => {\r\n\t\t\t\tstate.loading = false;\r\n\t\t\t\tstate.success = true;\r\n\t\t\t\tstate.error = null;\r\n\t\t\t\tstate.user = action.payload;\r\n\t\t\t\tstate.message = \"Utilizador actualizado com sucesso!\";\r\n\t\t\t})\r\n\t\t\t.addCase(updateProfile.rejected, (state, action) => {\r\n\t\t\t\tconsole.log(state, action);\r\n\t\t\t\tstate.loading = false;\r\n\t\t\t\tstate.error = action.payload;\r\n\t\t\t\tstate.user = null;\r\n\t\t\t})\r\n\t\t\t.addCase(getUserDetails.pending, (state) => {\r\n\t\t\t\tstate.loading = true;\r\n\t\t\t\tstate.error = false;\r\n\t\t\t})\r\n\t\t\t.addCase(getUserDetails.fulfilled, (state, action) => {\r\n\t\t\t\tstate.loading = false;\r\n\t\t\t\tstate.success = true;\r\n\t\t\t\tstate.error = null;\r\n\t\t\t\tstate.user = action.payload;\r\n\t\t\t});\r\n\t},\r\n});\r\n\r\nexport const { resetMessage } = userSlice.actions;\r\nexport default userSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}